{"dependencies":[{"name":"style-value-types","loc":{"line":11,"column":34}},{"name":"../compositors/composite","loc":{"line":12,"column":26}},{"name":"../compositors/parallel","loc":{"line":13,"column":25}},{"name":"../transformers","loc":{"line":14,"column":29}}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar style_value_types_1 = require(\"style-value-types\");\nvar composite_1 = require(\"../compositors/composite\");\nvar parallel_1 = require(\"../compositors/parallel\");\nvar transformers_1 = require(\"../transformers\");\nvar isColor = style_value_types_1.color.test;\nvar convertToColorAction = function (init, props) { return (typeof props.from === 'string' && isColor(props.from) &&\n    typeof props.to === 'string' && isColor(props.to)) ? init(__assign({}, props, { from: 0, to: 1 })).pipe(transformers_1.blendColor(props.from, props.to), style_value_types_1.color.transform)\n    : init(props); };\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    return {\n        getVectorKeys: function (props) { return testNames.reduce(function (vectorKeys, key) {\n            if (props[key] !== undefined && !typeTests[key](props[key])) {\n                vectorKeys.push(key);\n            }\n            return vectorKeys;\n        }, []); },\n        test: function (props) { return props && testNames.reduce(function (isVector, key) {\n            return isVector || (props[key] !== undefined && !typeTests[key](props[key]));\n        }, false); }\n    };\n};\nvar reduceArrayValue = function (i) { return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n}; };\nvar createArrayVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        return convertToColorAction(init, vectorKeys.reduce(reduceArrayValue(i), __assign({}, props)));\n    });\n    return parallel_1.default.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) { return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n}; };\nvar createObjectVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        map[key] = convertToColorAction(init, vectorKeys.reduce(reduceObjectValue(key), __assign({}, props)));\n        return map;\n    }, {});\n    return composite_1.default(actionMap);\n};\nvar createColorVector = function (init, props) { return convertToColorAction(init, props); };\nvar vectorAction = function (init, typeTests) {\n    var _a = createVectorTests(typeTests), test = _a.test, getVectorKeys = _a.getVectorKeys;\n    return function (props) {\n        var isVector = test(props);\n        if (!isVector)\n            return init(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        if (Array.isArray(testProp)) {\n            return createArrayVector(init, props, vectorKeys);\n        }\n        else if (typeof testProp === 'string' && isColor(testProp)) {\n            return createColorVector(init, props, vectorKeys);\n        }\n        else {\n            return createObjectVector(init, props, vectorKeys);\n        }\n    };\n};\nexports.default = vectorAction;\n//# sourceMappingURL=vector.js.map"},"hash":"7675975819e283dcb03bce06a8c5c72b"}