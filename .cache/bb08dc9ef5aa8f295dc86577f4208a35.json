{"dependencies":[{"name":"framesync","loc":{"line":3,"column":26}},{"name":"../action","loc":{"line":4,"column":23}}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar framesync_1 = require(\"framesync\");\nvar action_1 = require(\"../action\");\nvar multi = function (_a) {\n    var getCount = _a.getCount, getFirst = _a.getFirst, getOutput = _a.getOutput, mapApi = _a.mapApi, setProp = _a.setProp, startActions = _a.startActions;\n    return function (actions) { return action_1.default(function (_a) {\n        var update = _a.update, complete = _a.complete, error = _a.error;\n        var numActions = getCount(actions);\n        var output = getOutput();\n        var updateOutput = function () { return update(output); };\n        var numCompletedActions = 0;\n        var subs = startActions(actions, function (a, name) { return a.start({\n            complete: function () {\n                numCompletedActions++;\n                if (numCompletedActions === numActions)\n                    framesync_1.onFrameUpdate(complete);\n            },\n            error: error,\n            update: function (v) {\n                setProp(output, name, v);\n                framesync_1.onFrameUpdate(updateOutput, true);\n            }\n        }); });\n        return Object.keys(getFirst(subs))\n            .reduce(function (api, methodName) {\n            api[methodName] = mapApi(subs, methodName);\n            return api;\n        }, {});\n    }); };\n};\nexports.default = multi;\n//# sourceMappingURL=multi.js.map","map":{"mappings":[{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/popmotion/compositors/multi.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}}],"sources":{"node_modules/popmotion/compositors/multi.js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar framesync_1 = require(\"framesync\");\nvar action_1 = require(\"../action\");\nvar multi = function (_a) {\n    var getCount = _a.getCount, getFirst = _a.getFirst, getOutput = _a.getOutput, mapApi = _a.mapApi, setProp = _a.setProp, startActions = _a.startActions;\n    return function (actions) { return action_1.default(function (_a) {\n        var update = _a.update, complete = _a.complete, error = _a.error;\n        var numActions = getCount(actions);\n        var output = getOutput();\n        var updateOutput = function () { return update(output); };\n        var numCompletedActions = 0;\n        var subs = startActions(actions, function (a, name) { return a.start({\n            complete: function () {\n                numCompletedActions++;\n                if (numCompletedActions === numActions)\n                    framesync_1.onFrameUpdate(complete);\n            },\n            error: error,\n            update: function (v) {\n                setProp(output, name, v);\n                framesync_1.onFrameUpdate(updateOutput, true);\n            }\n        }); });\n        return Object.keys(getFirst(subs))\n            .reduce(function (api, methodName) {\n            api[methodName] = mapApi(subs, methodName);\n            return api;\n        }, {});\n    }); };\n};\nexports.default = multi;\n//# sourceMappingURL=multi.js.map"},"lineCount":33}},"hash":"70e82d539b906fa8a90e9792b7953c76","cacheData":{"env":{}}}