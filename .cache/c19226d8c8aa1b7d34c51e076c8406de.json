{"dependencies":[{"name":"style-value-types","loc":{"line":11,"column":34}},{"name":"../compositors/composite","loc":{"line":12,"column":26}},{"name":"../compositors/parallel","loc":{"line":13,"column":25}},{"name":"../transformers","loc":{"line":14,"column":29}}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar style_value_types_1 = require(\"style-value-types\");\nvar composite_1 = require(\"../compositors/composite\");\nvar parallel_1 = require(\"../compositors/parallel\");\nvar transformers_1 = require(\"../transformers\");\nvar isColor = style_value_types_1.color.test;\nvar convertToColorAction = function (init, props) { return (typeof props.from === 'string' && isColor(props.from) &&\n    typeof props.to === 'string' && isColor(props.to)) ? init(__assign({}, props, { from: 0, to: 1 })).pipe(transformers_1.blendColor(props.from, props.to), style_value_types_1.color.transform)\n    : init(props); };\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    return {\n        getVectorKeys: function (props) { return testNames.reduce(function (vectorKeys, key) {\n            if (props[key] !== undefined && !typeTests[key](props[key])) {\n                vectorKeys.push(key);\n            }\n            return vectorKeys;\n        }, []); },\n        test: function (props) { return props && testNames.reduce(function (isVector, key) {\n            return isVector || (props[key] !== undefined && !typeTests[key](props[key]));\n        }, false); }\n    };\n};\nvar reduceArrayValue = function (i) { return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n}; };\nvar createArrayVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        return convertToColorAction(init, vectorKeys.reduce(reduceArrayValue(i), __assign({}, props)));\n    });\n    return parallel_1.default.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) { return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n}; };\nvar createObjectVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        map[key] = convertToColorAction(init, vectorKeys.reduce(reduceObjectValue(key), __assign({}, props)));\n        return map;\n    }, {});\n    return composite_1.default(actionMap);\n};\nvar createColorVector = function (init, props) { return convertToColorAction(init, props); };\nvar vectorAction = function (init, typeTests) {\n    var _a = createVectorTests(typeTests), test = _a.test, getVectorKeys = _a.getVectorKeys;\n    return function (props) {\n        var isVector = test(props);\n        if (!isVector)\n            return init(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        if (Array.isArray(testProp)) {\n            return createArrayVector(init, props, vectorKeys);\n        }\n        else if (typeof testProp === 'string' && isColor(testProp)) {\n            return createColorVector(init, props, vectorKeys);\n        }\n        else {\n            return createObjectVector(init, props, vectorKeys);\n        }\n    };\n};\nexports.default = vectorAction;\n//# sourceMappingURL=vector.js.map","map":{"mappings":[{"source":"node_modules/popmotion/action/vector.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/popmotion/action/vector.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}}],"sources":{"node_modules/popmotion/action/vector.js":"\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar style_value_types_1 = require(\"style-value-types\");\nvar composite_1 = require(\"../compositors/composite\");\nvar parallel_1 = require(\"../compositors/parallel\");\nvar transformers_1 = require(\"../transformers\");\nvar isColor = style_value_types_1.color.test;\nvar convertToColorAction = function (init, props) { return (typeof props.from === 'string' && isColor(props.from) &&\n    typeof props.to === 'string' && isColor(props.to)) ? init(__assign({}, props, { from: 0, to: 1 })).pipe(transformers_1.blendColor(props.from, props.to), style_value_types_1.color.transform)\n    : init(props); };\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    return {\n        getVectorKeys: function (props) { return testNames.reduce(function (vectorKeys, key) {\n            if (props[key] !== undefined && !typeTests[key](props[key])) {\n                vectorKeys.push(key);\n            }\n            return vectorKeys;\n        }, []); },\n        test: function (props) { return props && testNames.reduce(function (isVector, key) {\n            return isVector || (props[key] !== undefined && !typeTests[key](props[key]));\n        }, false); }\n    };\n};\nvar reduceArrayValue = function (i) { return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n}; };\nvar createArrayVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        return convertToColorAction(init, vectorKeys.reduce(reduceArrayValue(i), __assign({}, props)));\n    });\n    return parallel_1.default.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) { return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n}; };\nvar createObjectVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        map[key] = convertToColorAction(init, vectorKeys.reduce(reduceObjectValue(key), __assign({}, props)));\n        return map;\n    }, {});\n    return composite_1.default(actionMap);\n};\nvar createColorVector = function (init, props) { return convertToColorAction(init, props); };\nvar vectorAction = function (init, typeTests) {\n    var _a = createVectorTests(typeTests), test = _a.test, getVectorKeys = _a.getVectorKeys;\n    return function (props) {\n        var isVector = test(props);\n        if (!isVector)\n            return init(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        if (Array.isArray(testProp)) {\n            return createArrayVector(init, props, vectorKeys);\n        }\n        else if (typeof testProp === 'string' && isColor(testProp)) {\n            return createColorVector(init, props, vectorKeys);\n        }\n        else {\n            return createObjectVector(init, props, vectorKeys);\n        }\n    };\n};\nexports.default = vectorAction;\n//# sourceMappingURL=vector.js.map"},"lineCount":78}},"hash":"9263c2df268ad236896be78f001f8a63","cacheData":{"env":{}}}